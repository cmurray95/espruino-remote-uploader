<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>espruino-remote-uploader - Espruino Remote Uploader Tool</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>espruino-remote-uploader | Espruino Remote Uploader Tool</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="espruino-remote-uploader" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="remote-uploader provides a library allowing users to easily upload remotely stored code to any espruino hardware device" /> <meta property="og:description" content="remote-uploader provides a library allowing users to easily upload remotely stored code to any espruino hardware device" /> <link rel="canonical" href="http://localhost:4000/" /> <meta property="og:url" content="http://localhost:4000/" /> <meta property="og:site_name" content="Espruino Remote Uploader Tool" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="espruino-remote-uploader" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebSite","description":"remote-uploader provides a library allowing users to easily upload remotely stored code to any espruino hardware device","headline":"espruino-remote-uploader","name":"Espruino Remote Uploader Tool","url":"http://localhost:4000/"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> Espruino Remote Uploader Tool </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="http://localhost:4000/" class="nav-list-link active">espruino-remote-uploader</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Espruino Remote Uploader Tool" aria-label="Search Espruino Remote Uploader Tool" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="espruino-remote-uploader"> <a href="#espruino-remote-uploader" class="anchor-heading" aria-labelledby="espruino-remote-uploader"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> espruino-remote-uploader </h1> <p>This tool allows for code to be uploaded remotely to Espruino hardware devices from a web browser. The uploader works by fetching a file containing valid espruino code, then writes to a connected espruino device using the <a href="https://www.espruino.com/UART.js"> UART.js </a> library.</p> <p>The uploader can write to both flash or RAM storage, and will check code currently stored on the device to prevent redundent writes.</p> <p>This tool relies upon web bluetooth to work, and as such requires a supported device/browser to work. You can find a list of supported browsers <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Bluetooth_API#browser_compatibility">here</a>.</p> <p>Source code for the uploader is available <a href="https://github.com/cmurray95/espruino-remote-uploader">here</a></p> <p>Further documentation along with interactive demos are available <a href="https://cmurray95.github.io/espruino-remote-uploader/">here</a></p> <h2 id="installation"> <a href="#installation" class="anchor-heading" aria-labelledby="installation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installation </h2> <p>The package can be installed via npm using:</p> <p><code class="language-plaintext highlighter-rouge">npm i remote-uploader --save</code></p> <p>Alternatively, you can include the following script tag:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;script src="https://unpkg.com/remote-uploader@2.6.0/dist/remote.min.js"&gt;&lt;/script&gt;
</code></pre></div></div> <h2 id="usage"> <a href="#usage" class="anchor-heading" aria-labelledby="usage"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Usage </h2> <h3 id="creating-a-connection"> <a href="#creating-a-connection" class="anchor-heading" aria-labelledby="creating-a-connection"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a connection </h3> <p>To create a new connection:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>let connection = new Remote();
connection.connect();
</code></pre></div></div> <h3 id="uploading-code-to-the-device"> <a href="#uploading-code-to-the-device" class="anchor-heading" aria-labelledby="uploading-code-to-the-device"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Uploading code to the device </h3> <p>To upload code to a connected device. Important to note that the upload function will have a delay before returning whilst code is being written to the device:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>connection.upload(url).then(success =&gt; {
    if(success){
        //...
    } else {
        //...
    }
})
</code></pre></div></div> <p>Additionally, you can specify true to upload code directly to flash storage (flash uploading does not work for bangle devices):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>connection.upload(url,true).then(success =&gt; {
    if(success){
        //...
    } else {
        //...
    }
})
</code></pre></div></div> <h3 id="identifying-a-device"> <a href="#identifying-a-device" class="anchor-heading" aria-labelledby="identifying-a-device"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Identifying a device </h3> <p>Retrieve device type (e.g. pixl, bangle, puck):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>connection.getDeviceType().then(result =&gt; {
    //...
})
</code></pre></div></div> <h3 id="reading-code-from-device"> <a href="#reading-code-from-device" class="anchor-heading" aria-labelledby="reading-code-from-device"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Reading code from device </h3> <p>You can retrieve code stored on the device using:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>connection.dump().then((result) =&gt; {
    //...
})
</code></pre></div></div> <h3 id="reset-a-devices-memory"> <a href="#reset-a-devices-memory" class="anchor-heading" aria-labelledby="reset-a-devices-memory"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Reset a devices memory </h3> <p>To reset the device (removes all code currently stored on the device):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>connection.reset();
</code></pre></div></div> <h3 id="disconnecting-a-device"> <a href="#disconnecting-a-device" class="anchor-heading" aria-labelledby="disconnecting-a-device"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Disconnecting a device </h3> <p>To disconnect the device from the current webpage:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>connection.disconnect();
</code></pre></div></div> <h3 id="setting-a-custom-delay"> <a href="#setting-a-custom-delay" class="anchor-heading" aria-labelledby="setting-a-custom-delay"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting a custom delay </h3> <p>When writing code to a device using upload(), the remote-uploader will wait for a set time before verifying if the write was succesful or not. The amount of time taken to write to a device can vary heavily depending the size of the upload file, and the device being written to. By default the delay is set to 10 seconds, however users can override this using:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>connection.setDelay(val)
</code></pre></div></div> <p>where val is a time in miliseconds. Be aware that issues may occur when using the delay value is too short.</p> <h3 id="calling-functions-from-the-device"> <a href="#calling-functions-from-the-device" class="anchor-heading" aria-labelledby="calling-functions-from-the-device"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Calling functions from the device </h3> <p>You can execute methods written to the device using:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>connection.call(foo)
</code></pre></div></div> <p>where foo is a string representing the function being called on the device. For example, to call foo you would use:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>connection.call("foo();");
</code></pre></div></div> <h3 id="retrieving-data-from-the-device"> <a href="#retrieving-data-from-the-device" class="anchor-heading" aria-labelledby="retrieving-data-from-the-device"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Retrieving data from the device </h3> <p>You can retrieve a value from the device using:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>connection.eval(foo, delay).then((res =&gt; {
    //...
}))
</code></pre></div></div> <p>Where foo is a string representing the function being called on the device, and delay is the time in miliseconds to wait before attempting to read back the value. Attempting to evaluate a response from a device can take time. Setting the delay value too low may result in errors.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
